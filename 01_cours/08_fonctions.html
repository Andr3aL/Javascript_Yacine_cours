<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Les fonctions en JS</title>
</head>
<body>
    <h1>Les fonctions en JS</h1>


    <script>

        document.write(`<h2> Fonctions prédéfinies et utilisateurs </h2>`);
        document.write(`<hr>`);

        // Le js possède des fonctions. Ce sont des morceaux de codes encapsulés qu'on appele au besoin pour exécuter une action précise. On distingue les fonctions prédéfinies et les fonctions utilisateurs.

        document.write(`<h3> Fonctions prédéfinies </h3>`);

        // ------- a) Fonctions prédéfinies sur des nombres -------

        let testNumber = 1.55555555555;
        document.write(typeof testNumber + ' '); /* + ' ' , c'est pour créer un espace */

        let number = testNumber.toFixed(2);
        document.write(typeof number + ' ');
        document.write(number + ' ');

        // La fonction toFixed() définit un nombre de chiffres après la virgule, et elle retourne une chaine de caractère de type string

        document.write(typeof parseFloat(number) + ' ');

        // La fonction parseFloat() permet de convertir un string ou toute autre chose, en type "number"

        document.write(`<br>`);

        // let testMath = Math.pow(2,2); // puissance
        // let testMath = Math.PI; // 3.14
        // let testMath = Math.floor(1.9); // Il va chercher le nombre entier inférieur, donc ici 1
        // let testMath = Math.ceil(1.9); // Il va chercher le nombre entier supérieur, donc ici 2
        // let testMath = Math.max(10,8,14,50,6); // Il va retourner la valeur la plus haute
        // let testMath = Math.min(10,8,14,50,6); // Il va retourner la valeur la plus petite
        // let testMath = Math.random(); // Il va retourner un nombre décimal entre 0 et 1 qui change à chaque rafraichissement (actualisation de page). C'est un nombre complètement aléatoire.

        // console.log(testMath);

        // Je veux un nombre entier entre 0 et 100 de façon aléatoire
        // let nombre = Math.random() * 100;
        // document.write(nombre + '<br> ');
        // document.write(Math.round(nombre) + '<br> ');
        



        // ------- b) Fonctions prédéfinies sur des chaines de caractères -------


        document.write(`<hr>`);
        document.write(`<br>`);

        let phrase = "Salut Yacine";

        document.write(phrase.length); // retourne le nombre de caractère (attention, il compte les espaces aussi !) (length = propriété = ne prend pas de paramètres)


        document.write(`<br>`);


        document.write(phrase.indexOf("l") + `<br>`); // retourne la position (l'index) de l'argument passé en paramètre de la fonction indexOf()

        document.write(phrase.toLowerCase() + '<br>'); // retourne "salut yacine" tout en minuscule. C'est une fonction pour enlever les majuscules.

        document.write(phrase.toUpperCase() + '<br>'); // retourne "SALUT YACINE" tout en majuscule. C'est une fonction pour tout mettre en majuscule.

        let phrase2 = '         du texte          ';
        let sansEspace = phrase2.trim(); // cette fonction supprime les epsaces en trop tout autour de la chaine de caractère (avant et après, mais pas entre)
        console.log(sansEspace.length); 
        console.log(sansEspace);
        document.write(sansEspace);
        document.write(`<br>`);
        document.write(sansEspace.length);
        document.write(`<br>`);

        let phrasee = '         du texte          ';
        document.write(phrasee);
        document.write(`<br>`);
        document.write(phrasee.length);

        let phrase3 = 'metro, boulot, dodo/ 0';
        console.log(phrase3.split('/')); // permet de retourner un tableau à partir d'une chaine de caractère et de le séparer où l'on veut (il y a plusieurs façons de séparer : on choisit le type de séparateur et on le place en argument de la fonction split pour séparer les cases de notre tableau)
        
        document.write(`<hr>`);
        document.write(`<br>`);




        document.write(`<h2> Fonctions prédéfinies et utilisateurs </h2>`);
        document.write(`<hr>`);


        // Un des grands principes de programmation est d'avoir un code DRY (don't repeat yourselft)
        // Les fonctions sont des blocs de codes réutilisavles et modifiables à volonté

        // --------- Déclaration d'une fonction ou initialisation d'une fonction

        function maFonction() { // function est un "mot-clé" de javascript, comme "let" par exemple
            document.write(`<p> Ma première fonction </p>`);
        }


        // Appel ( = exécution) de la fonction

        maFonction();

        // Autre syntaxe pour déclarer une fonction, elle consiste à assigner une fonction à une variable

        let direBonjour = function() {
            document.write(`<p> Bonjour tout le monde </p>`);
        }

        direBonjour();

        // Fonction avec paramètre

        function direBonjour1(prenom) { // prenom ici, est un paramètre, c'est une variable 'locale' à cette fonction, uniquement utilisable dans cette fonction.
            document.write(`<p> Bonjour ${prenom} </p>`);
        }

        direBonjour1('Alexandre');
        direBonjour1('Delma');

        // Vous pouvez mettre autant de paramètre que nécessaire.

        function direBonjour2(nom, age) {
            document.write(`<p> Bonjour ${nom}, tu as ${age} ans </p>`);
        }

        direBonjour2('Yacine', '28');
        direBonjour2('Alexandre', '51');

        // Fonction de calcul
        function addition(nombre1, nombre2) {
            let resultat = nombre1 + nombre2;
            document.write(`Résultat de l'addition de : ${nombre1} + ${nombre2} = ${resultat}`);
        }

        addition(5,10);


        // Protection des fonctions
        function direSalut(prenomSalut = "") {
            document.write(`<p> Salut ${prenomSalut} </p>`)
        }


        direSalut();        
        // création d'une fonction comme raccourci de "document.write()"

        function d(content, balise) {
            if (balise === 1) {
                document.write(`<h2>${content}</h2>`);
            } else {
                document.write(`<p>${content}</p>`);
            }
        }

        d("titre", 1);
        d(phrase);

        // Fonctions avec le mot clé "return" // retourne une valeur

        function calculAge(anneActuelle, anneNaissance) {
            // Pour extraire le résultat et le stocker dans une variable, nous utilisons le RETURN
            return anneActuelle - anneNaissance;
            // Tout ce qui se trouve après le RETURN ne s'exécute pas
            // un RETURN arrête complètement l'exécution d'une fonction
        }

        let age = calculAge(2024, 2002);
        d(age);

        // Il existe une autre façon pour écrire ou déclarer une fonction

        let maFonction2 = (x, y) => {

            d(x + y);

        }

        maFonction2(5, 2);
// -----------------------
    // la fonction fléchée ne peut pas être exécutée avant initialisation
    // la fonction fléchée : les accolades ne sont pas nécessaires si il n'y a qu'une seule insctruction.
    // "=>" : c'est le "return"

        let maFonction3 = (f, r) => f * r;

        let produit = maFonction3(6, 5);

        d(produit);

        document.write(`<hr>`);
        document.write(`<br>`);

        d('La portée des variables', 1);

        /* 
        
        En javascript, la portée des variables définit à quels endroits dans le code une variable est accessible. Il existe principalement trois types de portée : 

        Portée globale (global scope)
        Portée locale (ou fonctionnelle) (function scope)
        portée de bloc (block scope)

        1. portée globale (Global Scope)
        Une variable déclarée en dehors de toute fonction ou bloc a une portée globale.
        Cela signifie qu'elle est accessible depuis d'importe quelle partie du code.

        Exemple :

        */

        let message = "Bonjour, monde!"; // Variable globale

        function afficherMessage() {
            d(message); // Accès à la variable globale
        }

        afficherMessage(); // Affiche : Bonjour, monde! -> Accès également à la variable globale

        // dans cet exemple, la variable message est définie en dehors de la fonction. Elle est donc accessible depuis la fonction "afficherMessage" et même depuis le reste du programme.

        /*
        
        2. Portée locale (ou fonctionnelle) (function scope) : 
        Une variable déclarée à l'intérieur d'une fonction est accessible uniquement à l'intérieur de cette fonction. Elle a une portée locale (ou portée de fonction).
        
        */

        function saluer() {
            var prenom = "Delma"
            let nom = "Leta"; // Variable locale à la fonction
            d(`Salut ${nom}`);
        }

        saluer(); // Affiche : Salut Delma
        // console.log(nom); // Erreur : "nom" est non définie ("nom" is not defined)
        // console.log(prenom);
        

        // Ici, la variable "nom" est déclarée dans la fonction "saluer()". Elle n'est accessible qu'à l'intérieur de cette fonction. Toute tentative d'y accéder en dehors de la fonction provoque une erreur.
        
        // Exemple :

        /*
        
        3. Portée de bloc (Block Scope)
        Les déclarations de variables avec "let" et "const" respectent la portée de bloc, ce qui signifie qu'elles sont accessibles uniquement à l'intérieur du bloc {} dans lequel elles sont définies (par exemple, dans une boucle ou une condition if). En revanche, les variables déclarées avec "var" ne respectent pas la portée de bloc.

        Exemple avec "let" et "var" : 
        
        */

        if (true) {
            let X = 10;
            const Y = 20;
            console.log(X); // Affiche : 10
            console.log(Y); // Affiche : 20
        }

        // console.log(X); // Erreur : X is not defined
        // console.log(Y); // Erreur : Y is not defined

        // Dans cet exemple, X et Y sont déclarées avec "let" et "const" dans le bloc "if". Ils ne sont accessibles que dans ce bloc.

        // Exemple avec "var" : 

        if (true) {
            var z = 30;
            console.log(z); // Affiche : 30
            
        }
            console.log(z); // Affiche : 30 -> car "var" ignore la portée de bloc
            // Avec "var", la variable z est accessible en dehors du bloc "if", car "var" n'est pas limité par la portée de bloc, mais uniquement par la portée de fonction.

            
        








    </script>
    







</body>
</html>